generator client {
  provider        = "prisma-client-js"
}

datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  relationMode = "prisma"
}

// Your models go here
model User {
  id          String   @id
  name        String?
  email       String   @unique
  password    String
  role        String   @default("user")
  isAdmin     Boolean  @default(false)
  isSuspended Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  replays     Replay[]

  @@map("User")
}

model Replay {
  id        String   @id
  code      String
  codeInt   Int
  replayId  Int
  title     String
  startTime DateTime
  endTime   DateTime
  notes     String?
  createdBy String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  user      User     @relation(fields: [createdBy], references: [id])

  @@map("Replay")
}

model Recording {
  id        String   @id
  replayId  Int
  label     String
  url       String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("Recording")
}

model Prompt {
  id        String   @id
  replayId  Int
  type      String
  audioUrl  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("Prompt")
}

model Usage {
  id                   String   @id
  replayId             Int
  callerId             String
  durationSeconds      Int
  firstNameRecordingUrl String?
  lastNameRecordingUrl  String?
  companyRecordingUrl   String?
  phoneRecordingUrl     String?
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt

  @@map("Usage")
}